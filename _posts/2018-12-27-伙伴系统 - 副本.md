---
layout: post
title: "伙伴系统"
date: 2018-12-27
excerpt: "伙伴系统"
tags: [伙伴系统，操作系统]
comments: true
---


##  伙伴系统（Buddy System）

- 整个可分配的分区大小为2^u
- 需要的分区大小为2^(u - 1) - 1 <  **S** <= 2^u

- 数据结构
  - 空闲块按大小和起始地址组织成二位数组(从小到大地址为一维，相同大小的空闲块的地址)
  - 初始状态:只有一个大小为2^u的空闲块

- 分配过程
  - 由小到大在空闲块数组中找最小的可用空闲块
  - 入空闲块过大，对可用空闲块进行二等分，直到得到合适的可用空闲块
- 释放过程
  - 把释放的块放入空闲块数组
  - 合并满足合并条件的空闲块

- 合并条件
  - 相邻相同
  - 地址相邻
  - 起始地址较小的块的起始地址必须是2^(i + 1)的整数倍

##  伙伴系统实现

